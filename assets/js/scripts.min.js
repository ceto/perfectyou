(function($) {
    $.expr[":"].onScreen = function(elem) {
        var $window = $(window);
        var viewport_top = $window.scrollTop();
        var viewport_height = $window.height();
        var viewport_bottom = viewport_top + viewport_height;
        var $elem = $(elem);
        var top = $elem.offset().top;
        var height = $elem.height();
        var bottom = top + height;
        return top >= viewport_top && top < viewport_bottom || bottom > viewport_top && bottom <= viewport_bottom || height > viewport_height && top <= viewport_top && bottom >= viewport_bottom;
    };
})(jQuery);

(function($) {
    var Roots = {
        common: {
            init: function() {}
        },
        home: {
            init: function() {}
        },
        about_us: {
            init: function() {}
        }
    };
    var UTIL = {
        fire: function(func, funcname, args) {
            var namespace = Roots;
            funcname = funcname === undefined ? "init" : funcname;
            if (func !== "" && namespace[func] && typeof namespace[func][funcname] === "function") {
                namespace[func][funcname](args);
            }
        },
        loadEvents: function() {
            UTIL.fire("common");
            $.each(document.body.className.replace(/-/g, "_").split(/\s+/), function(i, classnm) {
                UTIL.fire(classnm);
            });
        }
    };
    $(document).ready(UTIL.loadEvents);
})(jQuery);

$(function() {
    $("a[href*=#]:not([href=#])").click(function() {
        if (location.pathname.replace(/^\//, "") === this.pathname.replace(/^\//, "") && location.hostname === this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $("[name=" + this.hash.slice(1) + "]");
            if (target.length) {
                $("html,body").animate({
                    scrollTop: target.offset().top
                }, 1e3);
                return false;
            }
        }
    });
});

jQuery(document).ready(function($) {
    if ($(".subsec-sidebar").length > 0) {
        var top = $(".subsec-sidebar").offset().top - parseFloat($(".subsec-sidebar").css("marginTop").replace(/auto/, 0));
        $(window).scroll(function(event) {
            var y = $(this).scrollTop();
            if (y >= top) {
                $(".subsec-sidebar").addClass("fixed");
            } else {
                $(".subsec-sidebar").removeClass("fixed");
            }
        });
    }
    var htop = $(".banner").offset().top - parseFloat($(".banner").css("marginTop").replace(/auto/, 0));
    $(window).scroll(function(event) {
        var y = $(this).scrollTop();
        if (y - 60 >= htop) {
            $(".banner").addClass("fixedhead");
        } else {
            $(".banner").removeClass("fixedhead");
        }
    });
});